{% extends 'base.html' %}
{% block title %}Vault{% endblock %}
{% block content %}
<div class="card p-3">
  <h4>Vault</h4>
  <form method="POST" action="{{ url_for('files.upload_file') }}" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="mb-3">{{ form.file.label }}{{ form.file(class_='form-control') }}</div>
    {{ form.submit(class_='btn btn-primary') }}
  </form>
  <hr/>
  {% if files %}
    <ul class="list-group">
      {% for f in files %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ f.filename }}</strong><br><small>{{ f.size }} bytes â€¢ {{ f.created_at }}</small>
          </div>
          <div>
            <a href="{{ url_for('files.download_file', file_id=f.id) }}" class="btn btn-sm btn-success">Download</a>
            <form method="POST" action="{{ url_for('files.delete_file', file_id=f.id) }}" style="display:inline">
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">Vault is empty.</p>
  {% endif %}
</div>
{% endblock %}
